<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<StackPane prefWidth="963.0" styleClass="workspace-container" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controladores.FXMLFacturaController">
  <children>
    <VBox fx:id="ap_factura" spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 5; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 0);">
      <StackPane.margin>
        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
      </StackPane.margin>
      <padding>
        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
      </padding>
      <children>

        <HBox alignment="CENTER_LEFT" spacing="20.0">
          <children>
            <Label styleClass="title-label" text="Nueva Factura">
              <font>
                <Font name="System Bold" size="24.0" />
              </font>
            </Label>
            <Separator visible="false" HBox.hgrow="ALWAYS" />
            <GridPane hgap="10.0" vgap="5.0">
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="150.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
              </rowConstraints>
              <children>
                <Label styleClass="workspace-text" text="N. Factura:" GridPane.halignment="RIGHT" />
                <TextField fx:id="txt_factura" editable="false" styleClass="workspace-field" GridPane.columnIndex="1" />
                <Label styleClass="workspace-text" text="Fecha EmisiÃ³n:" GridPane.halignment="RIGHT" GridPane.rowIndex="1" />
                <TextField fx:id="txt_fecha" editable="false" styleClass="workspace-field" GridPane.columnIndex="1" GridPane.rowIndex="1" />
              </children>
            </GridPane>
          </children>
        </HBox>

        <Separator />

        <VBox spacing="10.0" style="-fx-border-color: #e0e0e0; -fx-border-radius: 5; -fx-padding: 15; -fx-background-color: #f9f9f9;">
          <children>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
              <children>
                <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Datos del Cliente" />
                <Separator HBox.hgrow="ALWAYS" />
                <Button fx:id="btn_buscarCliente" mnemonicParsing="false" onAction="#buscarCliente" styleClass="secondary-button" text="ðŸ” Buscar Cliente" />
              </children>
            </HBox>
            <GridPane hgap="15.0" vgap="10.0">
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="80.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0" />
                <ColumnConstraints hgrow="SOMETIMES" maxWidth="100.0" minWidth="80.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
              </rowConstraints>
              <children>
                <Label styleClass="workspace-text" text="CI/RUC:" GridPane.halignment="RIGHT" />
                <TextField fx:id="txt_documento" onKeyPressed="#buscarCliente" promptText="Presione Enter para buscar..." styleClass="workspace-field" GridPane.columnIndex="1" />
                
                <Label styleClass="workspace-text" text="Nombres:" GridPane.columnIndex="2" GridPane.halignment="RIGHT" />
                <TextField fx:id="txt_nombres" styleClass="workspace-field" GridPane.columnIndex="3" />

                <Label styleClass="workspace-text" text="Apellidos:" GridPane.halignment="RIGHT" GridPane.rowIndex="1" />
                <TextField fx:id="txt_apellidos" styleClass="workspace-field" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                
                <Label styleClass="workspace-text" text="TelÃ©fono:" GridPane.columnIndex="2" GridPane.halignment="RIGHT" GridPane.rowIndex="1" />
                <TextField fx:id="txt_telefono" styleClass="workspace-field" GridPane.columnIndex="3" GridPane.rowIndex="1" />

                <Label styleClass="workspace-text" text="Correo:" GridPane.halignment="RIGHT" GridPane.rowIndex="2" />
                <TextField fx:id="txt_correo" styleClass="workspace-field" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2" />

                <Label styleClass="workspace-text" text="DirecciÃ³n:" GridPane.halignment="RIGHT" GridPane.rowIndex="3" />
                <TextField fx:id="txt_direccion" styleClass="workspace-field" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="3" />
              </children>
            </GridPane>
          </children>
        </VBox>

        <VBox spacing="10.0" VBox.vgrow="ALWAYS">
          <children>
            <HBox alignment="CENTER_LEFT" spacing="10.0">
              <children>
                <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Detalle de Productos" />
                <Separator HBox.hgrow="ALWAYS" />
                <Button fx:id="btn_anadirProducto" mnemonicParsing="false" styleClass="primary-button" text="âž• Agregar Producto" />
                <Button fx:id="btn_eliminarDetalle" mnemonicParsing="false" styleClass="danger-button" text="ðŸ—‘ Quitar Fila" />
              </children>
            </HBox>
                  <HBox prefHeight="222.0" prefWidth="637.0">
                     <children>
      
                  <TableView fx:id="tbl_detallefactura" editable="true" prefHeight="100.0" prefWidth="531.0" styleClass="invoice-table">
                    <columns>
                      <TableColumn fx:id="col_ID" prefWidth="75.0" text="ID" visible="false" />
                      <TableColumn fx:id="col_codigo" prefWidth="120.0" text="CÃ“DIGO" />
                      <TableColumn fx:id="col_buscar" prefWidth="89.0" text="BUSCAR" />
                      <TableColumn fx:id="col_descripcion" prefWidth="300.0" text="DESCRIPCIÃ“N" />
                      <TableColumn fx:id="col_cantidad" prefWidth="70.0" style="-fx-alignment: CENTER;" text="CANTIDAD" />
                      <TableColumn fx:id="col_pvp" prefWidth="100.0" style="-fx-alignment: CENTER-RIGHT;" text="PVP" />
                      <TableColumn fx:id="col_aplicaiva" editable="false" prefWidth="100.0" text="APLICAIVA" visible="false" />
                      <TableColumn fx:id="col_iva" editable="false" prefWidth="160.0" text="IVA" visible="false" />
                      <TableColumn fx:id="col_total" prefWidth="120.0" style="-fx-alignment: CENTER-RIGHT; -fx-font-weight: bold;" text="TOTAL" />
                    </columns>
                    <columnResizePolicy>
                      <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                    </columnResizePolicy>
                  </TableView>
                        <VBox prefHeight="200.0" prefWidth="100.0">
                           <children>
                        <Button fx:id="btn_grabar" defaultButton="true" mnemonicParsing="false" onAction="#acc_grabar" styleClass="primary-button" text="ðŸ’¾ Guardar Factura" />
                        <Button fx:id="btn_anular" mnemonicParsing="false" onAction="#acc_anular" styleClass="secondary-button" text="Anular Factura" />
                        <Button fx:id="btn_imprimir" mnemonicParsing="false" onAction="#acc_imprimir" styleClass="secondary-button" text="Imprimir" />
                        <Button fx:id="btn_cancelar" cancelButton="true" mnemonicParsing="false" onAction="#acc_cancelar" styleClass="secondary-button" text="Cancelar" />
                           </children>
                        </VBox>
                     </children>
                  </HBox>
          </children>
        </VBox>

        <HBox spacing="20.0">
          <children>
            <VBox spacing="5.0" HBox.hgrow="ALWAYS">
              <children>
                <Label styleClass="workspace-text" text="Observaciones:" />
                <TextField fx:id="txt_observaciones" alignment="TOP_LEFT" prefHeight="100.0" promptText="Notas adicionales para la factura..." styleClass="workspace-field" VBox.vgrow="ALWAYS" />
              </children>
            </VBox>
            
            <GridPane hgap="15.0" style="-fx-background-color: #f0f4f8; -fx-padding: 20; -fx-background-radius: 8; -fx-border-color: #dbe2e8; -fx-border-radius: 8;" vgap="8.0">
              <columnConstraints>
                <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" />
                <ColumnConstraints hgrow="SOMETIMES" minWidth="120.0" />
              </columnConstraints>
              <rowConstraints>
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" prefHeight="10.0" vgrow="SOMETIMES" />
                <RowConstraints minHeight="10.0" vgrow="SOMETIMES" />
              </rowConstraints>
              <children>
                <Label styleClass="workspace-text" text="Subtotal:" GridPane.halignment="RIGHT" />
                <TextField fx:id="txt_subtotal" editable="false" styleClass="workspace-field-totals" GridPane.columnIndex="1" />
                
                <Label styleClass="workspace-text" text="Subtotal(0):" GridPane.halignment="RIGHT" GridPane.rowIndex="1" />
                <TextField fx:id="txt_subtotal0" editable="false" styleClass="workspace-field-totals" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                
                <Label styleClass="workspace-text" text="Iva:" GridPane.halignment="RIGHT" GridPane.rowIndex="2" />
                <TextField fx:id="txt_iva" editable="false" styleClass="workspace-field-totals" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                
                <Label styleClass="workspace-text" text="Descuento:" GridPane.halignment="RIGHT" GridPane.rowIndex="3" />
                <TextField fx:id="txt_descuento" editable="false" styleClass="workspace-field-totals" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                
                <Separator GridPane.columnSpan="2" GridPane.rowIndex="4" />
                
                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="TOTAL A PAGAR:" GridPane.halignment="RIGHT" GridPane.rowIndex="5" />
                <TextField fx:id="txt_total" editable="false" style="-fx-font-weight: bold; -fx-font-size: 14px;" styleClass="workspace-field-totals" GridPane.columnIndex="1" GridPane.rowIndex="5" />
              </children>
            </GridPane>
          </children>
        </HBox>

        <Separator />

        <HBox alignment="CENTER_RIGHT" spacing="15.0" />
      </children>
    </VBox>
  </children>
</StackPane>
